
<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <!--main content wrapper start-->
    <body>
    <body>
    <div class="main-wrapper">
        <div class="row g-4">
            <div class="col-xl-3">
                <div class="account-nav bg-white rounded py-5">
                    <h6 class="mb-4 px-4">Manage My Account</h6>
                    <ul class="nav nav-tabs border-0 d-block account-nav-menu">
                        <li>
                            <a href="#products" data-bs-toggle="tab" class="active">
                                <span class="me-2">
                                    <svg width="13" height="12" viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path
                            d="M5 12C5 12.5523 4.55228 13 4 13C3.44772 13 3 12.5523 3 12C3 11.4477 3.44772 11 4 11C4.55228 11 5 11.4477 5 12Z"
                            fill="#212B36"
                          />
                          <path
                            d="M7 11.94C7 11.4209 7.42085 11 7.94 11H20.06C20.5791 11 21 11.4209 21 11.94V12.06C21 12.5791 20.5791 13 20.06 13H7.94C7.42085 13 7 12.5791 7 12.06V11.94Z"
                            fill="#212B36"
                          />
                          <path
                            d="M3 16.94C3 16.4209 3.42085 16 3.94 16H20.06C20.5791 16 21 16.4209 21 16.94V17.06C21 17.5791 20.5791 18 20.06 18H3.94C3.42085 18 3 17.5791 3 17.06V16.94Z"
                            fill="#212B36"
                          />
                          <path
                            d="M3 6.94C3 6.42085 3.42085 6 3.94 6H20.06C20.5791 6 21 6.42085 21 6.94V7.06C21 7.57915 20.5791 8 20.06 8H3.94C3.42085 8 3 7.57915 3 7.06V6.94Z"
                            fill="#212B36"
                          />
                                    </svg>
                                    </span>
                                    Prodotti
                                </a>
                            </li>
                            <li>
                                <a href="#aggiungi-prodotto" data-bs-toggle="tab">
                                    <span class="me-2">
                        <svg
                          width="24"
                          height="24"
                          viewBox="0 0 24 24"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            d="M5 12C5 12.5523 4.55228 13 4 13C3.44772 13 3 12.5523 3 12C3 11.4477 3.44772 11 4 11C4.55228 11 5 11.4477 5 12Z"
                            fill="#212B36"
                          />
                          <path
                            d="M7 11.94C7 11.4209 7.42085 11 7.94 11H20.06C20.5791 11 21 11.4209 21 11.94V12.06C21 12.5791 20.5791 13 20.06 13H7.94C7.42085 13 7 12.5791 7 12.06V11.94Z"
                            fill="#212B36"
                          />
                          <path
                            d="M3 16.94C3 16.4209 3.42085 16 3.94 16H20.06C20.5791 16 21 16.4209 21 16.94V17.06C21 17.5791 20.5791 18 20.06 18H3.94C3.42085 18 3 17.5791 3 17.06V16.94Z"
                            fill="#212B36"
                          />
                          <path
                            d="M3 6.94C3 6.42085 3.42085 6 3.94 6H20.06C20.5791 6 21 6.42085 21 6.94V7.06C21 7.57915 20.5791 8 20.06 8H3.94C3.42085 8 3 7.57915 3 7.06V6.94Z"
                            fill="#212B36"
                          />
                        </svg>
                        </span>
                        Aggiungi prodotto
                    </a>
                </li>
                <li>
                    <a href="#category" data-bs-toggle="tab">
                        <span class="me-2">
                        <svg
                          width="16"
                          height="16"
                          viewBox="0 0 16 16"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            d="M3.33333 1.99341H6C6.35362 1.99341 6.69276 2.13388 6.94281 2.38393C7.19286 2.63398 7.33333 2.97312 7.33333 3.32674V5.99341C7.33333 6.34703 7.19286 6.68617 6.94281 6.93622C6.69276 7.18627 6.35362 7.32674 6 7.32674H3.33333C2.97971 7.32674 2.64057 7.18627 2.39052 6.93622C2.14048 6.68617 2 6.34703 2 5.99341V3.32674C2 2.97312 2.14048 2.63398 2.39052 2.38393C2.64057 2.13388 2.97971 1.99341 3.33333 1.99341Z"
                            fill="#212B36"
                          />
                          <path
                            d="M10 1.99341H12.6667C13.0203 1.99341 13.3594 2.13388 13.6095 2.38393C13.8595 2.63398 14 2.97312 14 3.32674V5.99341C14 6.34703 13.8595 6.68617 13.6095 6.93622C13.3594 7.18627 13.0203 7.32674 12.6667 7.32674H10C9.64638 7.32674 9.30724 7.18627 9.05719 6.93622C8.80714 6.68617 8.66667 6.34703 8.66667 5.99341V3.32674C8.66667 2.97312 8.80714 2.63398 9.05719 2.38393C9.30724 2.13388 9.64638 1.99341 10 1.99341Z"
                            fill="#212B36"
                          />
                          <path
                            d="M6 8.66008H3.33333C2.97971 8.66008 2.64057 8.80055 2.39052 9.0506C2.14048 9.30065 2 9.63979 2 9.99341V12.6601C2 13.0137 2.14048 13.3528 2.39052 13.6029C2.64057 13.8529 2.97971 13.9934 3.33333 13.9934H6C6.35362 13.9934 6.69276 13.8529 6.94281 13.6029C7.19286 13.3528 7.33333 13.0137 7.33333 12.6601V9.99341C7.33333 9.63979 7.19286 9.30065 6.94281 9.0506C6.69276 8.80055 6.35362 8.66008 6 8.66008Z"
                            fill="#212B36"
                          />
                          <path
                            d="M10 8.66008H12.6667C13.0203 8.66008 13.3594 8.80055 13.6095 9.0506C13.8595 9.30065 14 9.63979 14 9.99341V12.6601C14 13.0137 13.8595 13.3528 13.6095 13.6029C13.3594 13.8529 13.0203 13.9934 12.6667 13.9934H10C9.64638 13.9934 9.30724 13.8529 9.05719 13.6029C8.80714 13.3528 8.66667 13.0137 8.66667 12.6601V9.99341C8.66667 9.63979 8.80714 9.30065 9.05719 9.0506C9.30724 8.80055 9.64638 8.66008 10 8.66008Z"
                            fill="#212B36"
                          />
                        </svg>
                        </span>
                        Categorie
                    </a>
                </li>
                <li>
                <a href="#add-category" data-bs-toggle="tab">
                    <span class="me-2">
                    <svg
                      width="16"
                      height="16"
                      viewBox="0 0 16 16"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M3.33333 1.99341H6C6.35362 1.99341 6.69276 2.13388 6.94281 2.38393C7.19286 2.63398 7.33333 2.97312 7.33333 3.32674V5.99341C7.33333 6.34703 7.19286 6.68617 6.94281 6.93622C6.69276 7.18627 6.35362 7.32674 6 7.32674H3.33333C2.97971 7.32674 2.64057 7.18627 2.39052 6.93622C2.14048 6.68617 2 6.34703 2 5.99341V3.32674C2 2.97312 2.14048 2.63398 2.39052 2.38393C2.64057 2.13388 2.97971 1.99341 3.33333 1.99341Z"
                        fill="#212B36"
                      />
                      <path
                        d="M10 1.99341H12.6667C13.0203 1.99341 13.3594 2.13388 13.6095 2.38393C13.8595 2.63398 14 2.97312 14 3.32674V5.99341C14 6.34703 13.8595 6.68617 13.6095 6.93622C13.3594 7.18627 13.0203 7.32674 12.6667 7.32674H10C9.64638 7.32674 9.30724 7.18627 9.05719 6.93622C8.80714 6.68617 8.66667 6.34703 8.66667 5.99341V3.32674C8.66667 2.97312 8.80714 2.63398 9.05719 2.38393C9.30724 2.13388 9.64638 1.99341 10 1.99341Z"
                        fill="#212B36"
                      />
                      <path
                        d="M6 8.66008H3.33333C2.97971 8.66008 2.64057 8.80055 2.39052 9.0506C2.14048 9.30065 2 9.63979 2 9.99341V12.6601C2 13.0137 2.14048 13.3528 2.39052 13.6029C2.64057 13.8529 2.97971 13.9934 3.33333 13.9934H6C6.35362 13.9934 6.69276 13.8529 6.94281 13.6029C7.19286 13.3528 7.33333 13.0137 7.33333 12.6601V9.99341C7.33333 9.63979 7.19286 9.30065 6.94281 9.0506C6.69276 8.80055 6.35362 8.66008 6 8.66008Z"
                        fill="#212B36"
                      />
                      <path
                        d="M10 8.66008H12.6667C13.0203 8.66008 13.3594 8.80055 13.6095 9.0506C13.8595 9.30065 14 9.63979 14 9.99341V12.6601C14 13.0137 13.8595 13.3528 13.6095 13.6029C13.3594 13.8529 13.0203 13.9934 12.6667 13.9934H10C9.64638 13.9934 9.30724 13.8529 9.05719 13.6029C8.80714 13.3528 8.66667 13.0137 8.66667 12.6601V9.99341C8.66667 9.63979 8.80714 9.30065 9.05719 9.0506C9.30724 8.80055 9.64638 8.66008 10 8.66008Z"
                        fill="#212B36"
                      />
                    </svg>
                    </span>
                    Aggiungi Categoria
                </a>
            </li>
            </ul>
        </div>
    </div>
                               
                    <div class="col-xl-9">
                        <div class="tab-content">
                            <div class="tab-pane fade show active" id="products">
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Nome</th>
                                            <th>Prezzo</th>
                                            <th>Categoria</th>
                                            <th>Stock</th>
                                            <th>Online</th>
                                            <th>Immagine</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {foreach $data_products as $product}
                                            <tr>
                                                <td>{$product->getId()}</td>
                                                <td>{$product->getName()}</td>
                                                <td>{$product->getPrice()}</td>
                                                {assign var="category" value=$product->getCategory()}
                                                <td>{$category -> getName()}</td>
                                                <td>{$product->getStock()}</td>
                                                <td>{$product->getIsOnline()}</td>
                                                <td>{$product->getImage()}</td>
                                                <td>
                                                <form id="editForm_{$product->getId()}" enctype="multipart/form-data" class="edit-form" style="display: none;">
                                                <input type="text" id="edit_name_{$product->getId()}" class="edit-input" value="{$product->getName()}">
                                                <input type="text" id="edit_price_{$product->getId()}" class="edit-input" value="{$product->getPrice()}">
                                                <select id="edit_category_{$product->getId()}" name="edit_category" class="edit-select">
                                                    {foreach $categories as $category}
                                                        <option value="{$category->getId()}">{$category->getName()}</option>
                                                    {/foreach}
                                                </select>
                                                <input type="text" id="edit_stock_{$product->getId()}" class="edit-input" value="{$product->getStock()}">
                                                <select id="edit_online_{$product->getId()}" class="edit-select">
                                                <option value="0" {if $product->getIsOnline() == 0}selected{/if}>Offline</option>
                                                <option value="1" {if $product->getIsOnline() == 1}selected{/if}>Online</option>
                                                </select>
                                                <div id="drop-area">
                                                <input type="text" id="edit_image_{$product->getId()}" class="edit-input" value="{$product->getImage()}">
                                                <input type="file" id="fileInput2_{$product->getId()}" name="image" class="custom-file-input" required> 
                                            </div>
                                                    
                                                    <button onclick="saveChanges({$product->getId()})" class="btn btn-primary btn-sm">Salva</button>
                                                    <button type="button" onclick="cancelEdit({$product->getId()})" class="btn btn-secondary btn-sm">Annulla</button>
                                                </form>


            <button onclick="toggleEditForm({$product->getId()})" class="btn btn-primary btn-sm btn-edit-product" data-productId="{$product->getId()}">
                Modifica
            </button>
                                                <button onclick="deleteProduct({$product->getId()})" class="btn btn-secondary btn-sm">Elimina</button>
                                            </td>
                                                
                                            </tr>
                                        {/foreach}
                                    </tbody>
                                </table>
                            </div>
                        </div>


<div class="tab-pane fade" id="aggiungi-prodotto">
    <div class="container-fluid bg-light py-4">
        <div class="container bg-white p-4 rounded">
        <h2 class="text-center mb-4 text-secondary display-4">Aggiungi un nuovo prodotto</h2>

            <form id="addProductForm" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="product_name"class="text-primary">Nome:</label>
                    <input type="text" id="product_name" name="product_name" class="form-control" placeholder="Inserisci il nome" required>
                </div>

                <div class="form-group">
                    <label for="product_price"class="text-primary">Prezzo:</label>
                    <input type="number" id="product_price" name="product_price" class="form-control" step="0.01" placeholder="Inserisci il prezzo" required>
                </div>

                <div class="form-group">
                    <label for="product_category"class="text-primary">Categoria:</label>
                    <select id="product_category" name="product_category" class="custom-select" required>
                        {foreach $categories as $category}
                            <option value="{$category->getId()}">{$category->getName()}</option>
                        {/foreach}
                    </select>
                </div>

                <div class="form-group">
                    <label for="product_stock"class="text-primary">Quantità in magazzino:</label>
                    <input type="number" id="product_stock" name="product_stock" class="form-control" placeholder="Inserisci la quantità" required>
                </div>

                <div class="form-group">
                    <label class="text-primary">Disponibile online:</label>
                    <div class="custom-control custom-radio">
                        <input type="radio" id="online_yes" name="product_online" class="custom-control-input" value="1" checked>
                        <label class="custom-control-label" for="online_yes">Sì</label>
                    </div>
                    <div class="custom-control custom-radio">
                        <input type="radio" id="online_no" name="product_online" class="custom-control-input" value="0">
                        <label class="custom-control-label" for="online_no">No</label>
                    </div>
                </div>
                <div id="drop-area">
                <label for="fileInput" class="text-primary">Immagine:</label>
                <input type="file" id="fileInput" name="image" class="custom-file-input" required> 
            </div>
            


                <button type="submit" class="btn btn-primary btn-block" onclick="addProduct()">Aggiungi Prodotto</button>
            </form>
        </div>
    </div>
</div>


<div class="tab-pane fade" id="category">
<div class="table-responsive">
    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Azioni</th>
            </tr>
        </thead>
        <tbody>
            {foreach $categories as $category}
                <tr>
                    <td>{$category->getId()}</td>
                    <td>{$category->getName()}</td>
                    <td>
                        <button onclick="deleteCategory({$category->getId()})" class="btn btn-primary btn-sm">Elimina</button>
                    </td>
                </tr>
            {/foreach}
        </tbody>
    </table>
</div>
</div>


<div class="tab-pane fade" id="add-category">
    <div class="container-fluid bg-light py-4">
        <div class="container bg-white p-4 rounded">
        <h2 class="text-center mb-4 text-secondary display-4">Aggiungi una nuova categoria</h2>
        <form id="addCategoryForm">
<div class="form-group">
                    <label for="category_name"class="text-primary">Nome:</label>
                    <input type="text" id="category_name" name="category_name" class="form-control" placeholder="Inserisci il nome" required>
                </div>
                <button type="submit" class="btn btn-primary btn-block" onclick="addNewCategory()">Aggiungi Categoria</button>
                </form>
        </div>
    </div>
</div>
















                        </div>
                    </div>